<!-- 網站編輯 -->
<div #SiteBlock [hidden]="editMode===EditModeType.Node" style="height: 100%;">
  <div style="width: 30%; height: 100%; float: left; border-right: 1px solid lightgray;" cmsResizer>
    <div class="page-title-container">
      <h1>網站列表
        <div style="float: right;">
          <button type="button" tabindex="0" mat-button (click)="testHtmlEditor()">Html(測試)</button>
        </div>
      </h1>
    </div>
    <div class="page-content-container">
      <mat-list>
        <ng-container *ngFor="let site of sites">
          <div [class.selected-site]="selectedSite===site">
            <mat-list-item (click)="selectSite(site)">{{site.site_name}}</mat-list-item>
          </div>
        </ng-container>
      </mat-list>
    </div>
  </div>
  <div style="width: 70%; float: right;">
    <div class="page-title-container">
      <h1>網站設定
        <div style="float: right;">
          <button type="button" tabindex="0" mat-button (click)="swichMode(EditModeType.Node)">編輯節點</button>
        </div>
      </h1>
    </div>
    <div class="page-content-container" *ngIf="selectedSiteUpdateModel">
      <mat-form-field appearance="outline">
        <mat-label>網站名稱</mat-label>
        <input matInput [(ngModel)]="selectedSiteUpdateModel.site_name" name="site_name" required #modelName="ngModel"
          readonly>
        <!-- <mat-error *ngIf="modelName.invalid">{{getErrorMessage(modelName)}}</mat-error> -->
      </mat-form-field>
      <br>
      <mat-form-field appearance="outline">
        <mat-label>子目錄名稱</mat-label>
        <input matInput [(ngModel)]="selectedSiteUpdateModel.site_id" name="site_id" required #modelId="ngModel"
          readonly>
        <!-- <mat-error *ngIf="modelId.invalid">{{getErrorMessage(modelId)}}</mat-error> -->
      </mat-form-field>
    </div>
  </div>
</div>

<!-- 節點編輯 -->
<div [hidden]="editMode===EditModeType.Site" style="height: 100%;">
  <div style="width: 50%; height: 100%; float: left; border-right: 1px solid lightgray;" cmsResizer
    [heightBase]="SiteBlock">
    <div class="page-title-container">
      <h1>{{selectedSite?.site_name}}
        <div style="float: right;">
          <button type="button" tabindex="0" mat-button (click)="swichMode(EditModeType.Site)">返回</button>
        </div>
      </h1>
    </div>
    <div class="page-content-container">
      <cms-tree #sitemapTree class="cms-tree" [context]="this" [nodeDatas]="sitemaps" [nodeDisplayField]="'node_name'"
        [draggable]="true" [customNodeRenderer]="customNodeRenderer" [defaultExpandLevel]="-1"
        (customEvent)="onSiteMapTreeCustomEvent($event)" (nodeSelect)="onNodeSelected($event)"
        (afterRender)="afterTreeRender($event)" (dragTo)="onTreeDragTo($event)"></cms-tree>
    </div>
  </div>
  <div *ngIf="selectedNode" style="width: 50%; float: right; border-left: 1px solid lightgray;">
    <cms-sitemap-node-update [siteId]="selectedSite?.site_id" [siteMapUpdateInfo]="selectedNode"
      (update)="onNodeUpdate()">
    </cms-sitemap-node-update>
  </div>
</div>
