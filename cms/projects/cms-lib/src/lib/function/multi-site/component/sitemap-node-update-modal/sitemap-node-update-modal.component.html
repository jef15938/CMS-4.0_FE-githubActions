<div class="page-content-container">
  <form #form="ngForm" style="margin-top: 10px;">

    <mat-form-field appearance="outline" *ngIf="nodeInfo">
      <mat-label>節點類型</mat-label>
      <mat-select [(ngModel)]="nodeInfo.node_type" name="node_type" disabled>
        <mat-option *ngFor="let option of nodeTypeOptions" [value]="option.value">
          {{option.name}}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <ng-container [ngSwitch]="nodeInfo.node_type">
      <!-- URL -->
      <ng-container *ngSwitchCase="SiteMapNodeType.URL">
        <mat-form-field appearance="outline">
          <mat-label>連結類型</mat-label>
          <mat-select [(ngModel)]="nodeInfo.url_type" name="url_type" disabled>
            <mat-option *ngFor="let option of urlTypeOptions" [value]="option.value">
              {{option.name}}
            </mat-option>
          </mat-select>
        </mat-form-field>
        <ng-container [ngSwitch]="nodeInfo.url_type">
          <!-- 站內 -->
          <ng-container *ngSwitchCase="SiteMapUrlType.INSIDE">
            <mat-form-field appearance="outline">
              <mat-label>站內節點ID</mat-label>
              <input matInput [(ngModel)]="nodeInfo.url_link_node_id" name="url_link_node_id">
            </mat-form-field>
          </ng-container>
          <!-- 站外 -->
          <ng-container *ngSwitchCase="SiteMapUrlType.OUTSIDE">
            <mat-form-field appearance="outline">
              <mat-label>站外網址</mat-label>
              <input matInput [(ngModel)]="nodeInfo.url" name="url">
            </mat-form-field>
          </ng-container>
          <!-- 共通 -->
          <mat-form-field appearance="outline">
            <mat-label>另開視窗</mat-label>
            <mat-select [(ngModel)]="nodeInfo.url_blank" name="url_blank">
              <mat-option *ngFor="let option of urlBlankTypeOptions" [value]="option.value">
                {{option.name}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </ng-container>
      </ng-container>

      <!-- CONTENT -->
      <ng-container *ngSwitchCase="SiteMapNodeType.CONTENT">
        <mat-form-field appearance="outline">
          <mat-label>節點連結路徑</mat-label>
          <input matInput [(ngModel)]="nodeInfo.content_path" name="content_path" #modelMetaTitle="ngModel">
        </mat-form-field>
      </ng-container>
    </ng-container>

    <mat-tab-group>
      <mat-tab *ngFor="let detail of nodeInfo.details">
        <ng-template mat-tab-label>
          <span *ngIf="detail.is_default" style="color: red; font-weight: bold;">* </span>
          {{detail.language_name}}
        </ng-template>
        <ng-template matTabContent>
          <div style="margin-top: 10px;">
            <mat-form-field appearance="outline">
              <mat-label>節點名稱</mat-label>
              <input matInput [value]="detail.node_name" name="node_name">
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>meta_title</mat-label>
              <input matInput [value]="detail.meta_title" name="meta_title">
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>meta_keyword</mat-label>
              <input matInput [value]="detail.meta_keyword" name="meta_keyword">
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>meta_description</mat-label>
              <input matInput [value]="detail.meta_description" name="meta_description">
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>meta_image</mat-label>
              <input matInput [value]="detail.meta_image" name="meta_image">
            </mat-form-field>
          </div>
        </ng-template>
      </mat-tab>
    </mat-tab-group>

    <div class="btn-group">
      <button type="button" tabindex="0" mat-button (click)="close()">取消</button>
      <button type="button" tabindex="0" mat-button (click)="confirm()" [disabled]="form.invalid">儲存</button>
    </div>
  </form>
</div>
