<div *ngIf="show && selected" class="cms-content-control-panel" (click)="$event.stopPropagation()">
  <div class="cms-content-control-panel__info info">
    <span class="info__text">版型種類 : {{selected.templateType}}</span>
    <br>
    <span class="info__text">版型Id : {{selected.templateInfo?.templateId}}</span>
    <br>
    <span class="info__text">Id : {{selected.templateInfo.id}}</span>
    <!-- <br>
    <span class="info__text">Fixed = {{selected.wrapper?.fixed}}</span>
    <br>
    <span class="info__text">editorActionMode = {{editorActionMode}}</span> -->
  </div>
  <hr>
  <ng-container *ngIf="selected.wrapper?.fixed">
    <mat-checkbox class="form__checkbox" [checked]="!!selected.templateInfo.hidden"
      (change)="selected.templateInfo.hidden = !(!!selected.templateInfo.hidden); hasChange=true;"
      [disabled]="editorActionMode===ContentEditorActionMode.TEMPLATE">
      隱藏版面
    </mat-checkbox>
    <br>
  </ng-container>
  <div class="cms-content-control-panel__btn-group btn-group">
    <button type="button" class="cms-content-control-panel__btn" tabindex="0" mat-icon-button matTooltip="版型限制"
      (click)="templateShowInfo()">
      <mat-icon>info</mat-icon>
    </button>
    <button type="button" class="cms-content-control-panel__btn" tabindex="0" mat-icon-button matTooltip="上移"
      (click)="moveTemplate('up')"
      [disabled]="!canTemplateMoveUp || editorActionMode===ContentEditorActionMode.TEMPLATE">
      <mat-icon>keyboard_arrow_up</mat-icon>
    </button>
    <button type="button" class="cms-content-control-panel__btn" tabindex="0" mat-icon-button matTooltip="下移"
      (click)="moveTemplate('down')"
      [disabled]="!canTemplateMoveDown || editorActionMode===ContentEditorActionMode.TEMPLATE">
      <mat-icon>keyboard_arrow_down</mat-icon>
    </button>
    <button type="button" class="cms-content-control-panel__btn" tabindex="0" mat-icon-button matTooltip="刪除版型"
      (click)="deleteTemplate()" [disabled]="editorActionMode===ContentEditorActionMode.TEMPLATE">
      <mat-icon>delete</mat-icon>
    </button>
  </div>
  <hr>
  <ng-container *ngIf="selected.selectedTargetType=== LayoutWrapperSelectedTargetType.TEMPLATE">
    <div [ngSwitch]="selected.templateType">
      <ng-container *ngSwitchCase="TemplateType.TAB">
        <cms-template-control-tab [selected]="selected" [editorActionMode]="editorActionMode"
          (change)="hasChange=true;"></cms-template-control-tab>
      </ng-container>
      <ng-container *ngSwitchCase="TemplateType.GROUP">
        <cms-template-control-group [selected]="selected" [editorActionMode]="editorActionMode"
          (change)="hasChange=true;"></cms-template-control-group>
      </ng-container>
      <div *ngSwitchCase="TemplateType.DATA_SOURCE">
        <cms-template-control-data-source [selected]="selected" [editorActionMode]="editorActionMode"
          (change)="hasChange=true;">
        </cms-template-control-data-source>
      </div>
      <div *ngSwitchCase="TemplateType.CUSTOMIZE">

      </div>
    </div>
  </ng-container>

  <ng-container *ngIf="selected.selectedTargetType === LayoutWrapperSelectedTargetType.FIELD">
    <div>
      FieldId : {{selected?.fieldInfo?.fieldId||''}}
      <br>
      FieldType : {{selected?.fieldInfo?.fieldType||''}}
      <hr>
    </div>
    <div [ngSwitch]="selected.fieldInfo.fieldType">
      <ng-container *ngSwitchCase="FieldType.TEXT">
        <cms-field-control-text [selected]="selected" [editorActionMode]="editorActionMode" (change)="hasChange=true;">
        </cms-field-control-text>
      </ng-container>
      <ng-container *ngSwitchCase="FieldType.TEXTEREA">
        <cms-field-control-textarea [selected]="selected" [editorActionMode]="editorActionMode"
          (change)="hasChange=true;"></cms-field-control-textarea>
      </ng-container>
      <ng-container *ngSwitchCase="FieldType.LINK">
        <cms-field-control-link [selected]="selected" [editorActionMode]="editorActionMode" (change)="hasChange=true;">
        </cms-field-control-link>
      </ng-container>
      <ng-container *ngSwitchCase="FieldType.BGIMG">
        <cms-field-control-bgimg [selected]="selected" [editorActionMode]="editorActionMode" (change)="hasChange=true;">
        </cms-field-control-bgimg>
      </ng-container>
      <ng-container *ngSwitchCase="FieldType.IMG">
        <cms-field-control-img [selected]="selected" [editorActionMode]="editorActionMode" (change)="hasChange=true;">
        </cms-field-control-img>
      </ng-container>
      <ng-container *ngSwitchCase="FieldType.HTMLEDITOR">
        <cms-field-control-html-editor [selected]="selected" [editorActionMode]="editorActionMode"
          (change)="hasChange=true;">
        </cms-field-control-html-editor>
      </ng-container>
    </div>
  </ng-container>
  <hr>
  <button type="button" tabindex="0" mat-raised-button style="width: 100%;" [disabled]="!hasChange"
    (click)="preserveChanges()">套用變更</button>
</div>
