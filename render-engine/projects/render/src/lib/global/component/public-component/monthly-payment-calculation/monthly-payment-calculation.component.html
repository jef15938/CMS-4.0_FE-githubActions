<h2>試算條件</h2>
<form (ngSubmit)="send(calculateForm)" #calculateForm="ngForm">
  <fieldset ngModelGroup="condition">
    <div>
      <label for="loan">貸款金額(萬)</label>
      <input #loan="ngModel" [(ngModel)]="condition.loan" type="text" id="loan" name="loan" maxlength="5" required
        placeholder="貸款金額" />
      <div *ngIf="loan.errors && loan.errors.required && loan.touched" class="error-msg">
        請設定貸款金額。
      </div>
    </div>
    <div>
      <label for="period">年期</label>
      <select #period="ngModel" [(ngModel)]="condition.period" id="period" name="period" required>
        <option *ngFor="let n of periodList" [value]="n">{{n}}</option>
      </select>
      <div *ngIf="period.errors && period.errors.required && loan.touched" class="error-msg">
        請設定年期。
      </div>
    </div>
    <div>
      <label for="firstYearRate">首年年利率(%)</label>
      <input #firstYearRate="ngModel" [(ngModel)]="condition.firstYearRate" type="text" id="firstYearRate"
        name="firstYearRate" maxlength="7" placeholder="首年年利率" required />
      <div *ngIf="firstYearRate.errors && firstYearRate.errors.required && loan.touched" class="error-msg">
        請設定首年利率。
      </div>
    </div>
    <div>
      <label for="secondYearRate">第二年起年利率(%)</label>
      <input #secondYearRate="ngModel" [(ngModel)]="condition.secondYearRate" type="text" id="secondYearRate"
        name="secondYearRate" maxlength="7" placeholder="第二年起年利率" required />
      <div *ngIf="secondYearRate.errors && secondYearRate.errors.required && loan.touched" class="error-msg">
        請設定第二年起利率。
      </div>
    </div>
  </fieldset>
  <button type="submit">立即試算</button>
</form>

<div *ngIf="calculateResult">
  <h2>月付金試算結果</h2>
  <h3>每月應繳金額（應還本金+利息）</h3>
  <form>
    <fieldset>
      <div>
        <label for="monthlyLoan_firstYear">首年</label>
        <input type="text" [value]="calculateResult.firstYear | number" disabled name="monthlyLoan_firstYear"
          id="monthlyLoan_firstYear" />
      </div>
      <div>
        <label for="monthlyLoan_secondYear">第二年起</label>
        <input type="text" [value]="calculateResult.secondYear | number" disabled name="monthlyLoan_secondYear"
          id="monthlyLoan_secondYear" />
      </div>
    </fieldset>
  </form>
  <div>註：以下金額僅供參考。</div>
  <table>
    <tr>
      <th>期別</th>
      <th>應還利息</th>
      <th>應還本金</th>
      <th>每月應繳金額</th>
      <th>本金餘額</th>
    </tr>
    <tr *ngFor="let item of calculateResult.resultList;index as i">
      <td>{{ i+1 }}</td>
      <td>{{ item.interest | number }}</td>
      <td>{{ item.capital | number }}</td>
      <td>{{ item.monthlyAmt | number }}</td>
      <td>{{ item.loan | number }}</td>
    </tr>
  </table>
</div>
